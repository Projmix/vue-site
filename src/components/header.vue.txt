<script>
import { useLayoutStore } from "../stores/layout.js";
import { computed } from 'vue';

export default {
  name: "Header",
  setup() {
    const store = useLayoutStore();
    const layout = computed(() => store.getLayout);
    const logo = computed(() => store.getLogo);
    return {
      layout,
      logo
    };
  },
  data() {
    return {
    };
  },
  methods: {
  },
  beforeMount() {
  },
};
</script>

<template>
  <!-- BEGIN | Header -->
  <header class="ht-header full-width-hd">
    <div class="row">
      <nav id="mainNav" class="navbar navbar-default navbar-custom">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header logo">
            <div class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
              <span class="sr-only">Toggle navigation</span>
              <div id="nav-icon1">
              <span></span>
              <span></span>
              <span></span>
            </div>
            </div>
            <router-link to="/"><img class="logo main-logo" :src="logo" alt="" width="119" height="58"></router-link>
          </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse flex-parent" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav flex-child-menu menu-left" v-if="layout && layout.menu">
            <li class="hidden">
              <a href="#page-top"></a>
            </li>
            <li class="dropdown first" v-for="link in layout.menu.filter(item => item.position).sort((a,b) => a.position - b.position)" :key="link">
              <router-link class="btn btn-default dropdown-toggle lv1" :data-toggle="link.children.length ? 'dropdown' : null" data-hover="dropdown" :to="link.children.length ? '#' : link.url.replace(/.html/, '')">
                {{ link.name }} <i class="fa fa-angle-down" aria-hidden="true" v-if="link.children.length"></i>
              </router-link>
              <ul class="dropdown-menu level1" v-if="link.children.length">
                <li v-for="subLink in link.children" :key="subLink"><router-link :to="subLink.url.replace(/.html/, '')">{{ subLink.name }}</router-link></li>
              </ul>
            </li>	
            
          </ul>
          
        </div>
      <!-- /.navbar-collapse -->
      </nav>
      <!-- search form -->
    </div>
  </header>
  <!-- END | Header -->
</template>

<style scoped>

</style>
